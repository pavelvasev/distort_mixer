# Шейдеры искажения

Идея - выворачивать фигуры.
* Для красоты и новых изображений.
* Чтобы смотреть изнанку объектов, вдруг что новое увидим.

[Готовые прикольные сцены](super-urla.md) | [Картинки](https://plus.google.com/103760296556580207748/posts/dpi4WW5jesb)

Запуск демо-сцены: http://viewlang.ru/viewlang/scene.html?s=https://github.com/pavelvasev/distort_mixer/blob/master/run-demo-all.vl

Первые действия:

1. Выбрать справа шейдер, например AxisZ
2. Поменять у него параметр Pow - будет происходить выворачивание.
3. Выбирать шейдеры и их параметры. 

## Список шейдеров

#### [DenisDistortShader](shaders/Denis.qml)
Синус-преобразование из книги Дениса Перевалова

- пример из Mastering openFrameworks
https://www.youtube.com/watch?v=7uyqGC5GmDw

- глава 8, пример 06-VertexDeformation 
https://cloud.mail.ru/public/aa1a8e7d91e8/MasteringOF-Examples-OF0074-VS2010

#### [ZAxisDistortShader](shaders/ZAxis.qml) 
"Выворачивание" вдоль оси Z 

Формула: 
```
distance = расстояние до некоей точки на оси Z.
x = x / pow( distance / radius, Pow )
y = y / pow( distance / radius, Pow )
z = z (без изменений)
```

* `Radius` - радиус сферы. Все точки, бывшие до преобразования вне цилиндра на оси Z указанного радиуса - уйдут внутрь него, все точки что были внутри - выйдут наружу. 
* `Pow` - показатель степени (distance/radius), то есть сила преобразования.. Если он 0 - значит ничего не происходит.

#### [ZPointDistortShader](shaders/ZPoint.qml) 
"Выворачивание" вокруг точки на оси Z 

Формула: 
```
distance = расстояние до некоей точки на оси Z.
x = x / pow( distance / radius, Pow )
y = y / pow( distance / radius, Pow )`
z = z / pow( distance / radius, Pow )`
```

* `Radius` - радиус сферы. Все точки, бывшие до преобразования вне этой сферы - уйдут внутрь нее, все точки что были снутри этой сферы - выйдут наружу. 
* `Pow` - показатель степени (distance/radius), то есть сила преобразования. Если он 0 - значит ничего не происходит.
* `Center` - координаты точки на оси Z.

#### [ExampleDistortShader](shaders/Example.qml)
Пример шейдера с 1 параметром

#### [ZComplexDistortShader](shaders/ZComplex.qml)
Преобразует (x,y) сообразно указанной комплексной функции.
Задается аргумент p = x + iy (x y координаты вершины), 
далее пропускается через выбранную функцию. 
Новое значение p определяет новую координату вершины.

* x и y сначала масштабируются сообразно параметру Scale
* можно указывать свои функции с доп. параметром.

#### [MorphShader](shaders/Morph.qml)
Шейдер-морфер. Показывает переход точек от исходной позиции к конечной. Его можно поставить в конце цепочки шейдеров. 

## Пояснение по демо-сцене 
* Шейдеры можно запускать в цепочке, до 3х штук одновременно. Последующий вертекс-шейдер использует результаты предыдущего. 
* Шейдеры можно редактировать прямо в сцене, кнопка Edit.

В демо-сцене под-сцены:

1. Набор точек желудочка сердца с удачной раскраской - синий цвет внешний, красный - внутренний. 
2. Случайный набор цветных точек.

## Развитие
Развитие (Михаил Бахтерев) - создать семейство ZAxis-функций на основе каких-то хороших комплексных функций.

## Работа выполнена
* Денис Перевалов - исходная идея и пример искажающего шейдера 
* Павел Васёв - реализация, zaxis/zpoint - коды
* Ярослав Кузнецов, Дмитрий Филоненко, Михаил Бахтерев, Сергей Правдин, Мария Сурина - неоценимая помощь.
